define(["bean","modules/util"],function(e,i){"use strict";function t(){r.setupMembershipCreative()}var n=!0,r={setupMembershipCreative:function(){window.injectInlineArticleMembershipCreative=r.injectInlineArticleMembershipCreative,window.applyNativeFunctionCall("injectInlineArticleMembershipCreative"),i.signalDevice("membership_creative_ready")},injectInlineArticleMembershipCreative:function(t,n,c){var a,l,s;i.isOnline()&&!document.querySelector(".membership-creative-container")&&(s=r.getInsertBeforeElem(),s&&(a=document.createElement("style"),a.type="text/css",a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),document.head.appendChild(a),l=document.createElement("a"),l.href="x-gu://membership_creative_tap/"+c,l.classList.add("membership-creative-container"),l.innerHTML=t,s.parentNode.insertBefore(l,s),e.on(window,"scroll",GU.util.debounce(r.isMembershipCreativeInView.bind(null,l,c),100))))},isMembershipCreativeInView:function(e,t){var r="membership_creative_view/"+t;n&&i.isElementPartiallyInViewport(e)&&(i.signalDevice(r),n=!1)},getInsertBeforeElem:function(){var e,i=0,t=document.querySelector(".article__body > div.prose");for(e=0;e<t.children.length;e++)if("P"===t.children[e].tagName&&(0===i||t.children[e-1]&&"P"===t.children[e-1].tagName&&t.children[e+1]&&("P"===t.children[e+1].tagName||"H2"===t.children[e+1].tagName))&&(i++,i>4))return t.children[e];return!1}};return{init:t}});